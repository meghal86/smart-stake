# ============================================
# Multi-Chain Wallet System - Integration Test Environment
# ============================================
# This file contains environment variables for running integration tests
# against the multi-chain wallet system Edge Functions.
#
# IMPORTANT: These are test credentials and should NEVER be used in production.
# Replace these values with your actual Supabase project credentials.

# ============================================
# Supabase Configuration (REQUIRED)
# ============================================
# Get these from your Supabase project settings:
# https://app.supabase.com/project/[project-id]/settings/api

# Your Supabase project URL
# Format: https://[project-id].supabase.co
NEXT_PUBLIC_SUPABASE_URL=https://rebeznxivaxgserswhbn.supabase.co

# Supabase anonymous key (public, safe to expose)
# Used for client-side authentication
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlYmV6bnhpdmF4Z3NlcnN3aGJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0MDc0NDIsImV4cCI6MjA3MDk4MzQ0Mn0.u2t2SEmm3rTpseRRdgym3jnaOq7lRLHW531PxPmu6xo

# Supabase service role key (SECRET - never expose in client code)
# Used by Edge Functions and server-side operations
# Keep this secure and never commit to version control
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlYmV6bnhpdmF4Z3NlcnN3aGJuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NTQwNzQ0MiwiZXhwIjoyMDcwOTgzNDQyfQ.zVEUhynJtV2Or7nGLil9cmEBLJH1nnyX9dL9PES19Hk

# ============================================
# Test User Credentials (REQUIRED)
# ============================================
# These credentials must correspond to a test user in your Supabase Auth

# UUID of the test user in auth.users table
# Generate a UUID or use an existing test user ID
# Format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
TEST_USER_ID=e5d55a48-b3fa-4c70-bbaa-373fd70ff1f7

# Valid JWT token for the test user
# This token must:
# 1. Be issued by your Supabase project
# 2. Contain the TEST_USER_ID in the 'sub' claim
# 3. Not be expired
# 4. Have proper signature validation
#
# To generate a test JWT:
# 1. Create a test user in Supabase Auth
# 2. Use Supabase CLI: supabase auth users list
# 3. Or use the Supabase dashboard to generate a token
#
# Format: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
TEST_JWT_TOKEN=your_valid_jwt_token_here

# ============================================
# Optional: Test Configuration
# ============================================
# These can be used to customize test behavior

# Timeout for Edge Function calls (milliseconds)
# Default: 30000 (30 seconds)
# TEST_TIMEOUT=30000

# Enable verbose logging during tests
# Default: false
# TEST_VERBOSE=false

# ============================================
# Setup Instructions
# ============================================
#
# 1. Create a test user in Supabase:
#    - Go to https://app.supabase.com/project/[project-id]/auth/users
#    - Click "Add user"
#    - Create a test user with email: test@example.com
#    - Note the user UUID
#
# 2. Generate a JWT token:
#    - Use Supabase CLI: supabase auth users list
#    - Or use the Supabase dashboard
#    - Copy the JWT token
#
# 3. Update this file:
#    - Replace NEXT_PUBLIC_SUPABASE_URL with your project URL
#    - Replace NEXT_PUBLIC_SUPABASE_ANON_KEY with your anon key
#    - Replace SUPABASE_SERVICE_ROLE_KEY with your service role key
#    - Replace TEST_USER_ID with the test user UUID
#    - Replace TEST_JWT_TOKEN with the valid JWT token
#
# 4. Verify the setup:
#    - Run: npm test -- src/__tests__/integration/edge-functions.test.ts --run
#    - All tests should pass
#
# ============================================
# Troubleshooting
# ============================================
#
# If tests fail with "UNAUTHORIZED" (401):
#    - Check that TEST_JWT_TOKEN is valid and not expired
#    - Verify the token contains the correct user_id
#    - Generate a new token if needed
#
# If tests fail with "SUPABASE_URL not set":
#    - Verify NEXT_PUBLIC_SUPABASE_URL is set correctly
#    - Check for typos in the URL
#    - Ensure the URL starts with https://
#
# If tests fail with "user_wallets table not found":
#    - Verify the user_wallets table exists in your Supabase project
#    - Check that RLS policies are configured correctly
#    - Run the database migration if needed
#
# If tests fail with "Edge Function not found":
#    - Verify all 5 Edge Functions are deployed:
#      - wallets-list
#      - wallets-add-watch
#      - wallets-remove
#      - wallets-remove-address
#      - wallets-set-primary
#    - Check Edge Function logs for deployment errors
#    - Verify Edge Functions are accessible at the correct URL
#
# ============================================
